# deploy_admin_terminal.yml
---
- hosts: admin_terminal
  become: yes
  become_method: sudo
  roles:
    - { role: puppet_disable, when: "disable_puppet" }
    - { role: iptables, when: "iptables_config" }
    - common
    - { role: epel, when: "use_epel and not 'production' in group_names" }
    - { role: python, when: "install_python and custom_repo" }
    - { role: python27-scl, when: "install_python and not custom_repo" }
    - { role: python36-scl, when: "install_python"}
    - { role: log-courier, when: "install_logstash" }
    - eod
    - odbc

  tasks:
    - name: Install development tools
      yum:
        name: "@development"
        state: present
        disable_gpg_check: yes

# TODO: Removing for now, since this needs modification to support both the old
#       Python install and the SCL install.  And, we don't deploy Ansible code 
#       from here anyways.
#    - name: Install Ansible in Python 2.7
#      become: no
#      pip:
#        virtualenv_command: /usr/local/bin/virtualenv
#        virtualenv: ~/.virtualenvs/data-platform
#        name: ansible
#        state: present
#        umask: "0022"
#      when: "install_python"
